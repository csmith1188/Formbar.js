
========== auth-service.js ==========
diff --git "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\auth-service.js" "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\auth-service.js"
index f749d761..f4b64a11 100644
--- "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\auth-service.js"
+++ "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\auth-service.js"
@@ -6,8 +6,6 @@ const { requireInternalParam } = require("@modules/error-wrapper");
 const crypto = require("crypto");
 const jwt = require("jsonwebtoken");
 const AppError = require("@errors/app-error");
-const ValidationError = require("@errors/validation-error");
-const ConflictError = require("@errors/conflict-error");

 const passwordRegex = /^[a-zA-Z0-9!@#$%^&*()\-_=+{}\[\]<>,.:;'"~?\/|\\]{5,20}$/;
 const displayRegex = /^[a-zA-Z0-9_ ]{5,20}$/;
@@ -32,15 +30,15 @@ function hashToken(token) {
  */
 async function register(email, password, displayName) {
     if (!privateKey || !publicKey) {
-        throw new AppError("Either the public key or private key is not available for JWT signing.", {event: "auth.register.failed", reason: "missing_keys"});
+        throw new AppError("Either the public key or private key is not available for JWT signing.", 500);
     }

     if (!passwordRegex.test(password)) {
-        throw new ValidationError("Password must be 5-20 characters long and can only contain letters, numbers, and special characters.", { event: "auth.register.failed", reason: "invalid_password" });
+        return { error: "Password must be 5-20 characters long and can only contain letters, numbers, and special characters." };
     }

     if (!displayRegex.test(displayName)) {
-        throw new ValidationError("Display name must be 5-20 characters long and can only contain letters, numbers, spaces, and underscores.", { event: "auth.register.failed", reason: "invalid_display_name" });
+        return { error: "Display name must be 5-20 characters long and can only contain letters, numbers, spaces, and underscores." };
     }

     // Normalize email to lowercase to prevent duplicate accounts
@@ -49,7 +47,7 @@ async function register(email, password, displayName) {
     // Check if user already exists
     const existingUser = await dbGet("SELECT * FROM users WHERE email = ? OR displayName = ?", [email, displayName]);
     if (existingUser) {
-        throw new ConflictError("A user with that email or display name already exists.", { event: "auth.register.failed", reason: "user_exists" });
+        return { error: "A user with that email or display name already exists." };
     }

     const hashedPassword = await hash(password, 10);
@@ -99,7 +97,7 @@ async function register(email, password, displayName) {
  */
 async function login(email, password) {
     if (!privateKey || !publicKey) {
-        throw new AppError("Either the public key or private key is not available for JWT signing.", { statusCode: 500, event: "auth.login.failed", reason: "missing_keys" });
+        throw new AppError("Either the public key or private key is not available for JWT signing.", 500);
     }

     // Normalize email to lowercase to prevent login issues
@@ -237,7 +235,7 @@ function invalidCredentials() {
  */
 async function googleOAuth(email, displayName) {
     if (!privateKey || !publicKey) {
-        throw new AppError("Either the public key or private key is not available for JWT signing.", { statusCode: 500, event: "auth.oauth.failed", reason: "missing_keys" });
+        throw new AppError("Either the public key or private key is not available for JWT signing.", 500);
     }

     // Normalize email to lowercase to prevent duplicate accounts
========== class-service.js ==========
diff --git "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\class-service.js" "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\class-service.js"
index 292d43b1..3e7af4ca 100644
--- "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\class-service.js"
+++ "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\class-service.js"
@@ -1,5 +1,5 @@
 const { dbGetAll, dbGet, dbRun } = require("@modules/database");
-
+const { logger } = require("@modules/logger");
 const { advancedEmitToClass, userSockets, setClassOfApiSockets, setClassOfUserSockets, userUpdateSocket } = require("@modules/socket-updates");
 const { classInformation, Classroom } = require("@modules/class/classroom");
 const {
@@ -149,6 +149,8 @@ async function createClass(className, ownerId, ownerEmail) {
     // Add classroom to the database
     const insertResult = await dbRun("INSERT INTO classroom(name, owner, key, tags) VALUES(?, ?, ?, ?)", [className, ownerId, key, null]);

+    logger.log("verbose", "[createClass] Added classroom to database");
+
     // Use the ID of the newly created classroom returned by dbRun
     const classId = insertResult;
     if (!classId) {
@@ -187,6 +189,7 @@ async function createClass(className, ownerId, ownerEmail) {
  * @returns {Promise<void>}
  */
 async function initializeClassroom(id) {
+    logger.log("verbose", `[initializeClassroom] Initializing class with id=(${id})`);

     // Fetch classroom data from database
     const classroom = await dbGet(
@@ -210,6 +213,11 @@ async function initializeClassroom(id) {
     // Normalize classroom data (JSON parsing, tags, poll history)
     normalizeClassroomData(classroom);

+    logger.log(
+        "verbose",
+        `[initializeClassroom] id=(${id}) name=(${classroom.name}) key=(${classroom.key}) sharedPolls=(${JSON.stringify(classroom.sharedPolls)})`
+    );
+
     // Validate and normalize permissions
     if (Object.keys(permissions).sort().toString() !== Object.keys(DEFAULT_CLASS_PERMISSIONS).sort().toString()) {
         for (let permission of Object.keys(permissions)) {
@@ -274,6 +282,8 @@ async function initializeClassroom(id) {
         classInformation.users[studentEmail] = student;
         classInformation.classrooms[id].students[studentEmail] = student;
     }
+
+    logger.log("verbose", `[initializeClassroom] Successfully initialized class ${id}`);
 }

 /**
@@ -282,6 +292,7 @@ async function initializeClassroom(id) {
  * @param {string|number} classId - The ID of the class to start.
  */
 async function startClass(classId) {
+    logger.log("info", `[startClass] classId=(${classId})`);
     await advancedEmitToClass("startClassSound", classId, { api: true });

     // Activate the class and send the class active event
@@ -292,6 +303,8 @@ async function startClass(classId) {
         { classPermissions: CLASS_SOCKET_PERMISSIONS.isClassActive },
         classInformation.classrooms[classId].isActive
     );
+
+    logger.log("verbose", `[startClass] classInformation=(${JSON.stringify(classInformation)})`);
 }

 /**
@@ -301,6 +314,7 @@ async function startClass(classId) {
  * @param {Object} [userSession] - The session object of the user ending the class.
  */
 async function endClass(classId, userSession) {
+    logger.log("info", `[endClass] classId=(${classId})`);
     await advancedEmitToClass("endClassSound", classId, { api: true });

     // Deactivate the class and send the class active event
@@ -313,6 +327,7 @@ async function endClass(classId, userSession) {
         { classPermissions: CLASS_SOCKET_PERMISSIONS.isClassActive },
         classInformation.classrooms[classId].isActive
     );
+    logger.log("verbose", `[endClass] classInformation=(${JSON.stringify(classInformation)})`);
 }

 /**
@@ -412,6 +427,8 @@ async function addUserToClassroomSession(classId, email, sessionUser) {

         // Call classUpdate on all user's tabs
         userUpdateSocket(email, "classUpdate", classId, { global: false, restrictToControlPanel: true });
+
+        logger.log("verbose", `[addUserToClassroomSession] User joined successfully`);
         return true;
     } else {
         // If the user is not a guest, insert them into the database
@@ -421,6 +438,8 @@ async function addUserToClassroomSession(classId, email, sessionUser) {
                 user.id,
                 classInformation.classrooms[classId].permissions.userDefaults,
             ]);
+
+            logger.log("info", "[addUserToClassroomSession] Added user to classusers");
         }

         // Grab the user from the users list
@@ -443,6 +462,8 @@ async function addUserToClassroomSession(classId, email, sessionUser) {

         // Call classUpdate on all user's tabs
         userUpdateSocket(email, "classUpdate", classId, { global: false, restrictToControlPanel: true });
+
+        logger.log("verbose", `[addUserToClassroomSession] New user joined successfully`);
         return true;
     }
 }
@@ -458,6 +479,8 @@ async function joinClass(userData, classId) {
     requireInternalParam(classId, "classId");
     requireInternalParam(email, "email");

+    logger.log("info", `[joinClass] session=(${JSON.stringify(userData)}) classId=${classId}`);
+
     // Convert class key to ID if necessary
     const dbClassroom = await dbGet("SELECT * FROM classroom WHERE key=? OR id=?", [classId, classId]);
     if (!dbClassroom) {
@@ -577,7 +600,3 @@ module.exports = {
     isClassActive,
     deleteRooms,
 };
-
-
-
-
========== log-service.js ==========
diff --git "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\log-service.js" "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\log-service.js"
index 8f5154b1..47a69f90 100644
--- "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\log-service.js"
+++ "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\log-service.js"
@@ -19,7 +19,7 @@ async function getAllLogs() {
         );
         return logs.filter(Boolean); // Remove null values
     } catch (err) {
-        throw new AppError(`Failed to retrieve logs: ${err.message}`, { statusCode: 500, event: "logs.get.failed", reason: "read_directory_error" });
+        throw new AppError(`Failed to retrieve logs: ${err.message}`, 500);
     }
 }

@@ -28,7 +28,7 @@ async function getLog(logFileName) {
         const content = await fs.readFile(`${logDir}${logFileName}`, "utf8");
         return content;
     } catch (err) {
-        throw new AppError(`Failed to read log file ${logFileName}: ${err.message}`, { statusCode: 500, event: "logs.get.failed", reason: "read_file_error" });
+        throw new AppError(`Failed to read log file ${logFileName}: ${err.message}`, 500);
     }
 }

========== manager-service.js ==========
diff --git "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\manager-service.js" "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\manager-service.js"
index 125215c5..d303e9b2 100644
--- "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\manager-service.js"
+++ "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\manager-service.js"
@@ -2,7 +2,6 @@ const { dbGetAll } = require("@modules/database");
 const jwt = require("jsonwebtoken");

 async function getManagerData() {
-    //TODO DO NOT PUT ALL USERS IN MEMORY, THIS IS BAD, NEED TO PAGINATE OR SOMETHING
     const users = await dbGetAll("SELECT id, email, permissions, displayName, verified FROM users");
     const classrooms = await dbGetAll("SELECT * FROM classroom");

========== poll-service.js ==========
diff --git "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\poll-service.js" "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\poll-service.js"
index 5ebe319d..149ff6f4 100644
--- "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\poll-service.js"
+++ "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\poll-service.js"
@@ -1,5 +1,5 @@
 const { classInformation } = require("@modules/class/classroom");
-
+const { logger } = require("@modules/logger");
 const { generateColors } = require("@modules/util");
 const { advancedEmitToClass, userUpdateSocket } = require("@modules/socket-updates");
 const { database, dbGetAll, dbRun } = require("@modules/database");
@@ -41,9 +41,15 @@ async function createPoll(classId, pollData, userSession) {
     }

     // Log poll information
+    logger.log("info", `[createPoll] session=(${JSON.stringify(userSession)})`);
+    logger.log(
+        "info",
+        `[createPoll] allowTextResponses=(${allowTextResponses}) prompt=(${prompt}) answers=(${JSON.stringify(answers)}) blind=(${blind}) weight=(${weight}) tags=(${tags})`
+    );

     await clearPoll(classId, userSession, false);
     const generatedColors = generateColors(Object.keys(answers).length);
+    logger.log("verbose", `[createPoll] user=(${classroom.students[userSession.email]})`);

     classroom.poll.allowVoteChanges = allowVoteChanges;
     classroom.poll.blind = blind;
@@ -96,6 +102,7 @@ async function createPoll(classId, pollData, userSession) {
     }

     // Log data about the class then call the appropriate update functions
+    logger.log("verbose", `[createPoll] classData=(${JSON.stringify(classroom)})`);
     userUpdateSocket(userSession.email, "classUpdate", classId, { global: true });
 }

@@ -125,6 +132,8 @@ async function updatePoll(classId, options, userSession) {
         throw new NotFoundError("Classroom not found");
     }

+    logger.log("info", `[updatePoll] classId=(${classId}) options=(${JSON.stringify(options)})`);
+
     // If an empty object is sent, clear the current poll
     const optionsKeys = Object.keys(options);
     if (optionsKeys.length === 0) {
@@ -189,6 +198,8 @@ async function savePollToHistory(classId) {
     }

     await dbRun("INSERT INTO poll_history(class, data, date) VALUES(?, ?, ?)", [classId, JSON.stringify(data), formattedDate]);
+
+    logger.log("verbose", "[savePollToHistory] saved poll to history");
 }

 /**
@@ -251,6 +262,8 @@ async function clearPoll(classId, userSession, updateClass = true) {
  */
 function pollResponse(classId, res, textRes, userSession) {
     const resLength = textRes != null ? textRes.length : 0;
+    logger.log("info", `[pollResponse] session=(${JSON.stringify(userSession)})`);
+    logger.log("info", `[pollResponse] res=(${res}) textRes=(${textRes}) resLength=(${resLength})`);

     const email = userSession.email;
     const user = classInformation.users[email];
@@ -258,6 +271,7 @@ function pollResponse(classId, res, textRes, userSession) {

     // If the classroom does not exist, return
     if (!classroom) {
+        logger.log("warning", `[pollResponse WARNING] session=(${JSON.stringify(userSession)}) - Classroom not found for classId ${classId}`);
         return;
     }

@@ -268,12 +282,14 @@ function pollResponse(classId, res, textRes, userSession) {

     // Check if user is excluded from voting using poll.excludedRespondents
     if (classroom.poll.excludedRespondents && classroom.poll.excludedRespondents.includes(user.id)) {
+        logger.log("info", `[pollResponse] User ${user.id} is excluded from voting`);
         return;
     }

     // Check if user has the "Excluded" tag
     const student = classroom.students[email];
     if (student && student.tags && Array.isArray(student.tags) && student.tags.includes("Excluded")) {
+        logger.log("info", `[pollResponse] User ${user.id} is excluded from voting due to Excluded tag`);
         return;
     }

@@ -352,12 +368,15 @@ function pollResponse(classId, res, textRes, userSession) {
             let addPogs = Math.floor(Math.random() * 10) + 1; // Randomly add between 1 and 10 digipogs
             database.run("UPDATE users SET digipogs = digipogs + ? WHERE id = ?", [addPogs, user.id], (err) => {
                 if (err) {
+                    logger.log("error", err.stack);
                 } else {
+                    logger.log("info", `[pollResponse] User ${user.email} earned a Digipog`);
                 }
             });
         }
         pogMeterTracker.pogMeterIncreased[email] = true;
     }
+    logger.log("verbose", `[pollResponse] user=(${classroom.students[userSession.email]})`);

     userUpdateSocket(email, "classUpdate", classId, { global: true });
 }
@@ -423,7 +442,3 @@ module.exports = {
     deleteCustomPolls,
     pogMeterTracker,
 };
-
-
-
-
========== room-service.js ==========
diff --git "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\room-service.js" "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\room-service.js"
index be510cc4..303df877 100644
--- "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\room-service.js"
+++ "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\room-service.js"
@@ -1,3 +1,4 @@
+const { logger } = require("@modules/logger");
 const { classInformation } = require("@modules/class/classroom");
 const { dbGet, dbRun } = require("@modules/database");
 const { advancedEmitToClass, emitToUser } = require("@modules/socket-updates");
@@ -27,6 +28,7 @@ function getClassService() {
  */
 async function joinRoomByCode(code, sessionUser) {
     const email = sessionUser.email;
+    logger.log("info", `[joinRoomByCode] email=(${email}) roomCode=(${code})`);

     // Find the classroom from the database
     const classroomDb = await dbGet("SELECT * FROM classroom WHERE key=?", [code]);
@@ -44,6 +46,8 @@ async function joinRoomByCode(code, sessionUser) {
     // Delegate to class-service to handle the actual joining logic
     // This avoids code duplication and keeps room-service focused on code validation
     const result = await getClassService().addUserToClassroomSession(classroomDb.id, email, sessionUser);
+
+    logger.log("verbose", `[joinRoomByCode] User joined successfully`);
     return result;
 }

@@ -55,6 +59,7 @@ async function joinRoomByCode(code, sessionUser) {
  * @returns {Promise<boolean>} Returns true if joined successfully.
  */
 async function joinRoom(userSession, classCode) {
+    logger.log("info", `[joinRoom] session=(${JSON.stringify(userSession)}) classCode=${classCode}`);

     const response = await joinRoomByCode(classCode, userSession);
     emitToUser(userSession.email, "joinClass", response);
@@ -105,6 +110,3 @@ module.exports = {
     joinRoom,
     leaveRoom,
 };
-
-
-
========== user-service.js ==========
diff --git "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\user-service.js" "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\user-service.js"
index 4352fb4a..ee4945af 100644
--- "a/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\services\\user-service.js"
+++ "b/C:\\Users\\mason.gover\\Desktop\\Repos\\Formbar.js-Hayden\\Formbar.js-Mason26611-WORKING\\services\\user-service.js"
@@ -22,7 +22,7 @@ function loadPasswordResetTemplate() {
     } catch (err) {
         // Log the underlying error for diagnostics, but throw a controlled error outward.
         console.error("Failed to load password reset email template:", err);
-        throw new AppError("Failed to load password reset email template.", { statusCode: 500, event: "user.password.reset.failed", reason: "template_load_error" });
+        throw new AppError("Failed to load password reset email template.", 500);
     }
 }

@@ -42,7 +42,7 @@ async function requestPasswordReset(email) {
 async function resetPassword(password, token) {
     const user = await dbGet("SELECT * FROM users WHERE secret = ?", [token]);
     if (!user) {
-        throw new NotFoundError("Password reset token is invalid or has expired.", { event: "user.password.reset.failed", reason: "invalid_token" });
+        throw new NotFoundError("Password reset token is invalid or has expired.");
     }

     const hashedPassword = await hash(password, 10);